<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Google Maps API Example - turning markers on and off with check boxes</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAFnFO3ySluSuha6r1vYekiRQNy_ewe8RNLHRa7cwLE-yWPUZNWBSV43OE1hhpvzIXRf04qzvWdmKBEw&amp;sensor=false" type="text/javascript"></script>

<!-- QueryString= -->
<!-- FullDomainName=www.geocodezip.com -->
<!-- PathInfo=/v2_MarkerCheckBoxes.asp -->
<!-- ScriptName=/v2_MarkerCheckBoxes.asp -->

<script type="text/javascript">
    //<![CDATA[
function Markers(color){

// map.closeInfoWindow();
map.getInfoWindow().hide() 
   if (document.getElementById(color).checked==false) { // hide the marker
      for (var i=0;i<gmarkers.length;i++) {
         if (gmarkers[i].type==color)  {
            map.removeOverlay(gmarkers[i]);
         }
      }
   } else { // show the marker again
      for (var i=0;i<gmarkers.length;i++) {
         if (gmarkers[i].type==color)  {
            map.addOverlay(gmarkers[i]);
         }
      }
   }
}
  //]]> 
</script>	
<script type="text/javascript">
    //<![CDATA[
GMap.prototype.centerAndZoomOnBounds = function(bounds) {
   var center_lat = (bounds.getNorthEast().lat() + bounds.getSouthWest().lat()) / 2.0;
   var center_lng = (bounds.getNorthEast().lng() + bounds.getSouthWest().lng()) / 2.0;
   var center = new GLatLng(center_lat,center_lng)
   map.setCenter(center, map.getBoundsZoomLevel(bounds));
}
  //]]> 
</script>
<script type="text/javascript">
  //<![CDATA[
// global variables
var gmarkers=[];
var map;
var request;
// var bounds = new GBounds(Number.MAX_VALUE, Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE); 
var bounds = new GLatLngBounds();
// Create our "tiny" marker icon 
var baseIcon = new GIcon();
baseIcon.image = "http://labs.google.com/ridefinder/images/mm_20_red.png";
baseIcon.shadow = "http://labs.google.com/ridefinder/images/mm_20_shadow.png";
baseIcon.iconSize = new GSize(12, 20);
baseIcon.shadowSize = new GSize(22, 20);
baseIcon.iconAnchor = new GPoint(6, 20);
baseIcon.infoWindowAnchor = new GPoint(5, 1);
baseIcon.imageMap = [4,0,0,4,0,7,3,11,4,19,7,19,8,11,11,7,11,4,7,0]; 
baseIcon.transparent = "mapIcons/mm_20_transparent.png";

var icons=[];

function coloredRideshareIcon(iconColor) {
   var color;
   if ((typeof(iconColor)=="undefined") || (iconColor==null)) { 
      color = "red" 
   } else { 
      color = iconColor; 
   }
   if (!icons[iconColor]) {
      var icon = new GIcon(baseIcon);
      icon.image = "http://labs.google.com/ridefinder/images/mm_20_"+ color +".png";
      icons[iconColor]=icon;

   } 
   return icons[iconColor];
}
	

function addMarker(lng, lat, title, iconStr) {
   var point = new GLatLng(lat, lng);
   bounds.extend(point);
   var icon = coloredRideshareIcon(iconStr);
   var marker = new GMarker(point, icon);
   gmarkers.push(marker);
   marker.type = iconStr; 
   GEvent.addListener(marker, "click", function () {
      // FF 1.5 fix
      var text = "<div style=\"white-space:nowrap;\"><div align=\"center\" class=\"smalltext\">"+title +"</div></div>";
      marker.openInfoWindowHtml(text);
   });
   map.addOverlay(marker);
}

function processXML() { 
   if (request.readyState == 4) {
      if (request.status != 200) {
         alert("file not found:"+request.status);
         return;
      }
      var xmlDoc = request.responseXML;
      if (!xmlDoc) {
         alert("invalid xml file");
         return;
      }
      markers = xmlDoc.documentElement.getElementsByTagName("marker");
      for (var i=0; i < markers.length; i++) {
         var color= markers[i].getAttribute("icon");
         addMarker(parseFloat(markers[i].getAttribute("lng")),
                   parseFloat(markers[i].getAttribute("lat")),
                   markers[i].getAttribute("title"), color);
	 // since all the markers are loaded by default, make sure all the boxes are checked
         document.getElementById(color).checked=true;
      }
      map.centerAndZoomOnBounds(bounds);
   }
} 
				  
function makeMap() {
   map = new GMap(document.getElementById("map"));
   map.addControl(new GLargeMapControl());
   map.addControl(new GMapTypeControl());
//   map.centerAndZoom(new GPoint(-3.97729, 54.30000), 11);	
   map.setCenter(new GLatLng(54.30000, -3.97729), 6);

   request = GXmlHttp.create(); 
   request.open("GET", "checkbox_exampleC.xml", true); 
   request.onreadystatechange = processXML;
   request.send(null);
}	
			
  //]]> 
</script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-162157-1";
urchinTracker();
</script>
</head>
<body onload="makeMap();">
<h3>Google Maps API Example - turning markers on and off with check boxes</h3>
<table class="tborder">
<tr><td class="alt2">
<!-- map --> 
<div id="map" style="width: 640px; height: 500px; padding:-5px;"></div>
<!-- map --> 
</td>
<td valign="top" class="alt1">
<!-- this is the form with the check boxes -->
<form name="form1" action=""><strong>Legend / Toggles</strong><br />
<img src="http://labs.google.com/ridefinder/images/mm_20_red.png" width="12" height="20" title="Red Markers" alt="Red Marker" /> 
<input type="checkbox" name="red" id="red" onclick="Markers('red')" checked="checked" /> Red Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_yellow.png" width="12" height="20" title="Yellow Markers" alt="Yellow Marker" /> 
<input type="checkbox" name="yellow" id="yellow" onclick="Markers('yellow')" checked="checked" /> Yellow Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_blue.png" width="12" height="20" title="Blue Markers" alt="Blue Marker" /> 
<input type="checkbox" name="blue" id="blue" onclick="Markers('blue')" checked="checked" /> Blue Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_purple.png" width="12" height="20" title="Purple Markers" alt="Purple Marker" /> <input type="checkbox" name="purple" id="purple" onclick="Markers('purple')" checked="checked" /> Purple Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_orange.png" width="12" height="20" title="Orange Markers" alt="Orange Marker" /> <input type="checkbox" name="orange" id="orange" onclick="Markers('orange')" checked="checked" /> Orange Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_green.png" width="12" height="20" title="Green Markers" alt="Green Marker" /> <input type="checkbox" name="green" id="green" onclick="Markers('green')" checked="checked" /> Green Markers<br />
<img src="http://labs.google.com/ridefinder/images/mm_20_white.png" width="12" height="20" title="White Markers" alt="White Marker" /> <input type="checkbox" name="white" id="white" onclick="Markers('white')" checked="checked" /> White Markers<br />
</form> <br />
</td>
</tr>
</table>
This example uses calls documented in the API. For an example that uses the undocumented display(true), display(false) calls see <a href="MarkerCheckBoxes2.asp">this example</a>.  For a description of why you might want to use the undocumented version see this <a href="http://groups.google.com/group/Google-Maps-API/msg/7ddc56b5cb95f084">thread</a>.
<div id="w3valid">
    <a href="http://validator.w3.org/check?uri=referer" target="validationresults"><img
        src="http://www.w3.org/Icons/valid-xhtml10"
        alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
</div>  
</body>
</html>